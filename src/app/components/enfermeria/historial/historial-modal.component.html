<div *ngIf="isOpen()" class="modal-overlay" (click)="closeModal($event)">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="border-b p-4">
      <h2 class="text-lg font-semibold">Historial Clínico: {{ cita()?.paciente }}</h2>
      <p class="text-sm text-gray-500">
        {{ cita()?.especie }} - {{ cita()?.raza }} - {{ cita()?.edad }}
      </p>
    </div>

    <!-- Tabs -->
    <div class="border-b">
      <div class="flex">
        <button
          class="py-3 px-4 font-medium text-sm relative"
          [class.text-primary]="activeTab() === 'consultas'"
          [class.border-b-2]="activeTab() === 'consultas'"
          [class.border-primary]="activeTab() === 'consultas'"
          (click)="activeTab.set('consultas')"
        >
          Consultas
        </button>
        <button
          class="py-3 px-4 font-medium text-sm relative"
          [class.text-primary]="activeTab() === 'vacunas'"
          [class.border-b-2]="activeTab() === 'vacunas'"
          [class.border-primary]="activeTab() === 'vacunas'"
          (click)="activeTab.set('vacunas')"
        >
          Vacunas
        </button>
      </div>
    </div>

    <!-- Content -->
    <div class="p-4">
      @if (activeTab() === 'consultas') {
        <div class="space-y-4">
          <div class="bg-gray-50 p-4 rounded-lg">
            <h3 class="font-semibold text-gray-900 mb-2">Última Consulta</h3>
            <p class="text-sm text-gray-600">Fecha: 15 de Noviembre, 2024</p>
            <p class="text-sm text-gray-600">Diagnóstico: Control rutinario</p>
            <p class="text-sm text-gray-600">Tratamiento: Ninguno requerido</p>
          </div>

          <div class="bg-gray-50 p-4 rounded-lg">
            <h3 class="font-semibold text-gray-900 mb-2">Consulta Anterior</h3>
            <p class="text-sm text-gray-600">Fecha: 1 de Noviembre, 2024</p>
            <p class="text-sm text-gray-600">Diagnóstico: Vacunación anual</p>
            <p class="text-sm text-gray-600">Tratamiento: Vacuna contra la rabia</p>
          </div>
        </div>
      }

      @if (activeTab() === 'vacunas') {
        <div class="space-y-4">
          <div class="bg-green-50 p-4 rounded-lg border border-green-200">
            <h3 class="font-semibold text-green-900 mb-2">Vacunas Aplicadas</h3>
            <div class="space-y-2">
              <div class="flex justify-between items-center">
                <span class="text-sm text-green-800">Rabia</span>
                <span class="text-xs text-green-600">1 de Noviembre, 2024</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-green-800">Triple Felina</span>
                <span class="text-xs text-green-600">15 de Octubre, 2024</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-green-800">Leucemia</span>
                <span class="text-xs text-green-600">1 de Octubre, 2024</span>
              </div>
            </div>
          </div>

          <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
            <h3 class="font-semibold text-yellow-900 mb-2">Próximas Vacunas</h3>
            <div class="space-y-2">
              <div class="flex justify-between items-center">
                <span class="text-sm text-yellow-800">Refuerzo Triple Felina</span>
                <span class="text-xs text-yellow-600">15 de Diciembre, 2024</span>
              </div>
            </div>
          </div>
        </div>
      }
    </div>

    <!-- Footer -->
    <div class="border-t p-4 flex justify-end">
      <button
        (click)="onClose.emit()"
        class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>
