<div class="ultima-cita-container">
  <div class="header">
    <h3>ğŸ“… Ãšltima Cita de {{ paciente?.nombreMascota }}</h3>
    <p class="subtitle">InformaciÃ³n de la cita mÃ¡s reciente</p>
  </div>

  <!-- Estado de carga -->
  <div *ngIf="cargando()" class="loading">
    <div class="spinner"></div>
    <p>Cargando informaciÃ³n de la cita...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error() && !cargando()" class="error">
    <p>âŒ {{ error() }}</p>
  </div>

  <!-- Sin citas -->
  <div *ngIf="!ultimaCita() && !cargando() && !error()" class="no-citas">
    <p>ğŸ“‹ No se encontraron citas para esta mascota</p>
    <p class="info">Esta mascota aÃºn no tiene citas registradas en el sistema.</p>
  </div>

  <!-- InformaciÃ³n de la cita -->
  <div *ngIf="ultimaCita() && !cargando()" class="cita-info">
    <div class="cita-card">
      <div class="cita-header">
        <div class="estado-badge" [ngClass]="getEstadoCitaClass(ultimaCita()?.estadoCita || '')">
          {{ getEstadoCitaEmoji(ultimaCita()?.estadoCita || '') }}
          {{ ultimaCita()?.estadoCita || 'N/A' }}
        </div>
        <div class="fecha-cita">
          <strong>Fecha de Registro:</strong><br>
          {{ formatearFecha(ultimaCita()?.fechaRegistro || '') }}
        </div>
      </div>

      <div class="cita-details">
        <div class="detail-row">
          <div class="detail-item">
            <strong>ğŸ†” ID de Cita:</strong>
            <span>{{ ultimaCita()?.citaId || 'N/A' }}</span>
          </div>
          <div class="detail-item">
            <strong>ğŸ¾ Mascota:</strong>
            <span>{{ ultimaCita()?.mascotaNombre || 'Cargando...' }}</span>
          </div>
        </div>

        <div class="detail-row">
          <div class="detail-item">
            <strong>ğŸ‘¤ Cliente:</strong>
            <span>{{ ultimaCita()?.clienteNombre || 'Cargando...' }}</span>
          </div>
          <div class="detail-item">
            <strong>ğŸ‘¨â€âš•ï¸ Veterinario:</strong>
            <span>{{ ultimaCita()?.veterinarioNombre || 'Cargando...' }}</span>
          </div>
        </div>

        <div class="detail-row">
          <div class="detail-item">
            <strong>ğŸ¥ Tipo de Servicio:</strong>
            <span>{{ ultimaCita()?.tipoServicioNombre || 'Cargando...' }}</span>
          </div>
        </div>

        <div class="motivo-section">
          <strong>ğŸ“ Motivo de la Cita:</strong>
          <div class="motivo-content">
            {{ ultimaCita()?.motivo || 'No se especificÃ³ motivo' }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
